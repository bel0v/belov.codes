---

---

<button
  class="theme-toggle"
  id="theme-toggle"
  type="button"
  title="Toggles light and dark theme"
  aria-label="auto">
  <svg
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
    width="1em"
    height="1em"
    fill="currentColor"
    viewBox="0 0 32 32">
    <path d="M16 9c3.9 0 7 3.1 7 7s-3.1 7-7 7"></path>
    <path
      d="M16 .5C7.4.5.5 7.4.5 16S7.4 31.5 16 31.5 31.5 24.6 31.5 16 24.6.5 16 .5zm0 28.1V23c-3.9 0-7-3.1-7-7s3.1-7 7-7V3.4C23 3.4 28.6 9 28.6 16S23 28.6 16 28.6z">
    </path>
  </svg>
</button>

<!-- the theme-toggle.ts script is loaded in Head.astro to be loaded early -->

<script>
  const button = document.getElementById('theme-toggle')

  button?.addEventListener('click', () => {
    button.classList.toggle('flip')
    document.firstElementChild?.classList.add('with-transition')
  })
</script>

<style is:global>
  .theme-toggle {
    --size: 32px;
    --toggle-duration: 500ms;
    --color: var(--color-text-secondary);
    --color-hover: var(--color-text);
    /* --color: hsl(210 10% 30%);
    --color-hover: hsl(210 10% 15%); */

    aspect-ratio: 1;
    border-radius: 50%;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;

    /* transition: color 0.15s ease; */

    color: var(--color);
    &:hover {
      color: var(--color-hover);
    }

    @media (hover: none) {
      --size: 48px;
    }

    width: var(--size);
    height: var(--size);

    svg {
      width: 100%;
      height: 100%;

      path {
        transform-origin: center;
        @media (prefers-reduced-motion: no-preference) {
          transition: transform var(--toggle-duration) ease;
        }
      }
    }
    /*
    [data-theme='dark'] & {
      --color: hsl(210 10% 90%);
      --color-hover: hsl(210 15% 100%);
    } */

    &.flip {
      & svg {
        :first-child {
          transform: rotate(180deg);
        }
        :last-child {
          transform: rotate(-180deg);
        }
      }
    }
  }
</style>
