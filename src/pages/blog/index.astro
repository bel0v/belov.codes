---
import MainLayout from 'layouts/MainLayout.astro'
import type { MarkdownInstance } from 'astro'
import type { PostFrontmatter } from '../../types'
import ContentWrapper from '../../components/ContentWrapper.astro'

const allPosts: MarkdownInstance<PostFrontmatter>[] = Object.values(
  import.meta.glob('./*.md', { eager: true })
)

const postsByDate = allPosts.sort(
  (a, b) => a.frontmatter.publishDate.valueOf() - b.frontmatter.publishDate.valueOf()
)
---

<MainLayout title="Blog">
  <ContentWrapper>
    <h1>Le blog</h1>
    <ul>
      {
        postsByDate.map((post) => (
          <li>
            <a href={post.url}>{post.frontmatter.title}</a>
          </li>
        ))
      }
    </ul>
  </ContentWrapper>
</MainLayout>
